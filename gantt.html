<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Animated Gantt Chart</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&family=Lora:wght@400;600;700&display=swap" rel="stylesheet">

<style>
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&display=swap');

* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg:#fff;
  --border:#1e2130;
  --text:#302f2f;
  --text-dim:#302f2f;

  --blue:#5b8ef5;
  --green:#4caf7a;
  --purple:#9b7ceb;
  --orange:#f0a050;
  --red:#e74c5e;
}

body {
  min-height: 100vh;
  background: transparent;
  font-family: 'Lora', serif;
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 32px;
}

/* ───────────────── Header ───────────────── */

.header {
  width: 980px;
  display: flex;
  justify-content: space-between;
  margin-bottom: 16px;
}



/* ───────────────── Gantt ───────────────── */

.gantt {
  width: 980px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}

/* Unified grid (THIS fixes alignment) */
.gantt-grid {
  display: grid;
  grid-template-columns: 160px repeat(8, 1fr);
}

/* ───────────────── Column headers ───────────────── */

.col-headers {
  border-bottom: 1px solid var(--border);
}

.col-header {
  text-align: center;
  font-size: 12px;
  font-weight: bold;
  letter-spacing: 1px;
  color: var(--text-dim);
  padding: 10px 0;
  border-right: 1px solid var(--border);
}

.col-header:last-child {
  border-right: none;
}

/* ───────────────── Rows ───────────────── */

.row {
  height: 34px;
  align-items: center;
  position: relative;
  border-bottom: 1px solid var(--border);
  opacity: 0;
  transform: translateY(6px);
}

.row.visible {
  animation: rowIn 0.45s cubic-bezier(0.22,1,0.36,1) forwards;
}

@keyframes rowIn {
  to { opacity: 1; transform: translateY(0); }
}

/* Task label */
.task-label {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 16px;
  border-right: 1px solid var(--border);
}

.task-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
}

.task-name {
  font-size: 14px;
    font-weight: bold;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Grid columns */
.grid-col {
  border-right: 1px solid var(--border);
  height: 100%;
}

.grid-col:last-child {
  border-right: none;
}

/* Gantt bar */
.gantt-bar {
  position: absolute;
  left: 160px;
  top: 50%;
  transform: translateY(-50%);
  height: 20px;
  border-radius: 4px;
  width: 0;
}

/* Today marker */
.today-marker {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--red);
  z-index: 3;
}
.today-marker::before {
  content: 'TODAY';
  position: absolute;
  top: -16px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  letter-spacing: 1px;
  color: var(--red);
}
</style>
</head>

<body>

<div>
  <div class="header">
  </div>

  <div class="gantt">
    <div class="today-marker" id="todayMarker"></div>

    <!-- Column headers -->
    <div class="col-headers gantt-grid">
      <div></div>
      <div class="col-header">Wk 1</div>
      <div class="col-header">Wk 2</div>
      <div class="col-header">Wk 3</div>
      <div class="col-header">Wk 4</div>
      <div class="col-header">Wk 5</div>
      <div class="col-header">Wk 6</div>
      <div class="col-header">Wk 7</div>
      <div class="col-header">Wk 8</div>
    </div>

    <!-- Rows -->
    <div id="rows"></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  const tasks = [
    { name:'Requirements',  color:'var(--blue)',   left:0,    width:10.5 },
    { name:'Wireframes',    color:'var(--green)',  left:12.5, width:21 },
    { name:'UI Design',     color:'var(--green)',  left:24.8,   width:21 },
    { name:'Frontend Dev',  color:'var(--purple)', left:37.3, width:31.5 },
    { name:'Integration',   color:'var(--orange)', left:62.2, width:21 },
    { name:'Launch',        color:'var(--red)',    left:87, width:11 }
  ];

  const rowsEl = document.getElementById('rows');

  tasks.forEach((t, i) => {
    const row = document.createElement('div');
    row.className = 'row gantt-grid';
    row.style.animationDelay = `${i * 80}ms`;

    row.innerHTML = `
      <div class="task-label">
        <div class="task-dot" style="background:${t.color}"></div>
        <span class="task-name">${t.name}</span>
      </div>

      ${'<div class="grid-col"></div>'.repeat(8)}

      <div class="gantt-bar"
           style="background:${t.color}; left:${160 + t.left * 0.01 * (980 - 160)}px"
           data-width="${t.width}">
      </div>
    `;

    rowsEl.appendChild(row);
    requestAnimationFrame(() => row.classList.add('visible'));
  });

  // Animate bars once
  anime({
    targets: '.gantt-bar',
    width: el => el.dataset.width + '%',
    delay: anime.stagger(90),
    duration: 900,
    easing: 'easeOutCubic'
  });

  // Today marker sweep once
  anime({
    targets: '#todayMarker',
    left: ['160px', '100%'],
    duration: 1400,
    delay: 500,
    easing: 'easeInOutSine'
  });

});

// Gantt Chart Animation on Scroll
    const ganttIframe = document.querySelector('iframe[src="gantt.html"]');
    
    if (ganttIframe) {
      const ganttObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Send message to iframe to restart animation
            ganttIframe.contentWindow.postMessage('restart-animation', '*');
          }
        });
      }, {
        threshold: 0.3,
        rootMargin: '0px'
      });
      
      ganttObserver.observe(ganttIframe);
    }
</script>

</body>
</html>
